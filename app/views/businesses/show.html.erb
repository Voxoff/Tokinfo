<div class="main">
  <div class="show_container">
    <div class="show_sub_container">
      <h1><%= @business.name.capitalize %></h1>
      <h3><%= @business.email %></h3>
      <a href="<%= @business.url %> "><h5>Website</h5></a>
    </div>
    <div class="text_container">
      <p><%= @business.description %></p>
    </div>
    <%= cl_image_tag @business.photo, height: 150, width: 200, crop: :fill, class: "show_sub_container2"%>

  </div>

  <hr class="line">

  <h2>Offerings:</h2>

  <div class="container">
    <div class="row">
      <% @tokens.each do |token| %>
        <div class="col-xs-6 col-xs-offset-3">
          <div class="token_card">
            <h3><%= token.name %></h3>
            <h5><%= token.business.name %></h5>
            <div class="token_card_image">
              <%= cl_image_tag token.photo, height: 130, width: 200, crop: :fill%>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <h2>Headquarters:</h2>

  <div class="container">
    <div class="row">
      <div class="col-xs-8 col-xs-offset-2">
        <div id="map" style="width: 100%; height: 500px; border-radius: 10px;"></div>
      </div>
    </div>
  </div>

</div>

<% content_for(:after_js) do %>
  <%= javascript_tag do %>
      var handler = Gmaps.build('Google', { markers: { clusterer: undefined } });
      handler.buildMap({ internal: { id: 'map' } }, function() {
        markers = handler.addMarkers(
          [
            {
              "lat": <%= raw @business.latitude %>,
              "lng": <%= raw @business.longitude %>,
              <!-- "infowindow": "<h1>Aix - Marseille</h1><p><img src='https://res.cloudinary.com/wagon/image/upload/c_fill,h_200/v1500988849/nqoqw5sinlj1hqvxrfyi.jpg' height='200'></p>" -->
            },
          ]
        );
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
  <% end %>
<% end %>

