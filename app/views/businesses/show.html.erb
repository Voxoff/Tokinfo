
<div class="background-design">
  <div class="navbar-offset"></div>
  <div class="show_container">
    <div class="show_sub_container">
      <a href="<%= @business.url %> "><h1><%= @business.name.capitalize %></h1></a>
      <h3><%= @business.email %></h3>
    </div>
    <%= cl_image_tag @business.photo, height: 200, width: 230, crop: :fill, id: "bus_img"%>
  </div>
  <hr class="line">
</div>



<div class="row">
  <div class="container col-sx-6">
    <h4 class="offerings">About:</h4>
    <div class="about-card">
      <p><%= @business.description %></p>
    </div>
  </div>

  <div class="container col-sx-6">
    <h4 class="offerings">Offerings:</h4>
    <div class="row">
      <% @tokens.each do |token| %>
        <%= link_to token_path(token) do %>
          <div class="col-xs-12 col-sm-3">
            <div class="card">
              <br>
              <%= cl_image_tag token.photo, height: 150, width: 200, crop: :fill %>
              <div class="card-content">
                <h3><%= token.name.upcase %> </h3>
                <p>Offered By: <%= token.business.name %> </p>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
  <h2>Headquarters:</h2>

  <div class="container">
    <div class="row">
      <div class="col-xs-8 col-xs-offset-2">
        <div id="map" style="width: 100%; height: 500px; border-radius: 10px;"></div>
      </div>
    </div>
  </div>

</div>

<% content_for(:after_js) do %>
  <%= javascript_tag do %>
      var handler = Gmaps.build('Google', { markers: { clusterer: undefined } });
      handler.buildMap({ internal: { id: 'map' } }, function() {
        markers = handler.addMarkers(
          [
            {
              "lat": <%= raw @business.latitude %>,
              "lng": <%= raw @business.longitude %>,
              <!-- "infowindow": "<h1>Aix - Marseille</h1><p><img src='https://res.cloudinary.com/wagon/image/upload/c_fill,h_200/v1500988849/nqoqw5sinlj1hqvxrfyi.jpg' height='200'></p>" -->
            },
          ]
        );
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
  <% end %>
<% end %>

